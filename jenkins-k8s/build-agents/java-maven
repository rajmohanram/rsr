FROM jenkins/inbound-agent:jdk17

USER root

ARG MAVEN_VERSION=3.9
ARG USER_HOME_DIR="/home/"${user}""
ENV MAVEN_CONFIG "$USER_HOME_DIR/.m2"
ENV MAVEN_HOME /usr/share/maven

COPY --from=maven:3.9-eclipse-temurin-17 ${MAVEN_HOME} ${MAVEN_HOME}

RUN ln -s ${MAVEN_HOME}/bin/mvn /usr/bin/mvn

USER jenkins

